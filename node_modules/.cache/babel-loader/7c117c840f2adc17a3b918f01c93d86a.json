{"ast":null,"code":"import \"core-js/modules/es.promise.js\";\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const loginUser = createAsyncThunk('auth/loginUser', async payload => {\n  const response = await axios.get('http://127.0.0.1:5500/apps/mocks/login.json');\n  return response.data;\n});\nexport const registerUser = createAsyncThunk('auth/registerUser', async payload => {\n  const response = await axios.get('http://127.0.0.1:5500/apps/mocks/login.json');\n  return response.status;\n});\nexport const getRestaurants = createAsyncThunk('auth/getRestaurants', async () => {\n  const response = await axios.get('http://127.0.0.1:5500/apps/mocks/restaurants.json');\n  return response.data;\n}); // Then, handle actions in your reducers:\n\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    isLoggedIn: false,\n    username: ''\n  },\n  reducers: {\n    logout(state) {\n      console.log('logging out');\n      state.isLoggedIn = false;\n      state.username = '';\n      sessionStorage.removeItem(\"token\");\n    } // standard reducer logic, with auto-generated action types per reducer\n\n\n  },\n  extraReducers: builder => {\n    builder.addCase(loginUser.fulfilled, (state, {\n      payload\n    }) => {\n      console.log(payload);\n\n      if (payload.bearerToken) {\n        sessionStorage.setItem(\"token\", JSON.stringify({\n          token: payload.bearerToken\n        }));\n      }\n\n      state.isLoggedIn = payload.bearerToken !== undefined;\n      state.username = payload.username;\n    });\n  }\n});","map":null,"metadata":{},"sourceType":"module"}