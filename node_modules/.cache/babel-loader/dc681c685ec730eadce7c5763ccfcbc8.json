{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alice-Maria\\\\Downloads\\\\licenta-fe\\\\libs\\\\authentication\\\\src\\\\containers\\\\login\\\\new-house.tsx\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.promise.js\";\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { saveHouse } from '../redux/slice';\nimport { Button } from 'primereact/button';\nimport { Card } from 'primereact/card';\nimport { InputText } from 'primereact/inputtext';\nimport './styles.scss';\nimport 'primeicons/primeicons.css';\nimport './refugees.css';\nimport { useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport Header from \"./header-owner\";\nimport { InputNumber } from 'primereact/inputnumber';\nimport { InputTextarea } from \"primereact/inputtextarea\";\nimport { ProgressBar } from 'primereact/progressbar';\nimport { Tag } from 'primereact/tag';\nimport house from './icons/house.svg';\nimport { FileUpload } from 'primereact/fileupload';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewHouse = () => {\n  let navigate = useNavigate();\n  const [city, setCity] = useState('');\n  const [description, setDescription] = useState('');\n  const [address, setAddress] = useState('');\n  const [name, setName] = useState('');\n  const [capacity, setCapacity] = useState(0);\n  const [phone, setPhone] = useState(\"\");\n  const [bookingPeriod, setBookingPeriod] = useState(0);\n  const [latitude, setLatitude] = useState(0);\n  const [longitude, setLongitude] = useState(0);\n  const [image, setImage] = useState('');\n  const [totalSize, setTotalSize] = useState(0);\n  const dispatch = useDispatch();\n\n  const emptyTemplate = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex align-items-center flex-column\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"pi pi-image mt-3 p-5\",\n        style: {\n          'fontSize': '5em',\n          borderRadius: '50%',\n          backgroundColor: 'var(--surface-b)',\n          color: 'var(--surface-d)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this);\n  };\n\n  const onTemplateSelect = e => {\n    let _totalSize = totalSize;\n    Array.prototype.forEach.call(e.files, file => {\n      _totalSize += file.size || 0;\n    });\n    console.log('here is the issue 3: ' + _totalSize);\n    setTotalSize(_totalSize);\n  };\n\n  const onTemplateClear = () => {\n    setTotalSize(0);\n  };\n\n  const onTemplateRemove = (file, callback) => {\n    setTotalSize(totalSize - file.size);\n    callback();\n  };\n\n  function round(value, decimals) {\n    return Number(Math.round(value) + 'e-' + decimals).toFixed(decimals);\n  }\n\n  const headerTemplate = options => {\n    const {\n      className,\n      chooseButton,\n      uploadButton,\n      cancelButton\n    } = options;\n    let value;\n    if (totalSize == null) value = 0;\n    value = totalSize / 1000;\n    console.log(\"The value size is\" + value);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: className,\n      style: {\n        backgroundColor: 'transparent',\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: [chooseButton, uploadButton, cancelButton, /*#__PURE__*/_jsxDEV(ProgressBar, {\n        value: value,\n        displayValueTemplate: () => `${round(value, 2)} KB / 3 MB`,\n        style: {\n          width: '300px',\n          height: '20px',\n          marginLeft: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this);\n  };\n\n  const itemTemplate = (file, props) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex align-items-center flex-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex align-items-center\",\n        style: {\n          width: '40%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          alt: file.name,\n          role: \"presentation\",\n          src: file.objectURL,\n          width: 100\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"flex flex-column text-left ml-3\",\n          children: [file.name, /*#__PURE__*/_jsxDEV(\"small\", {\n            children: new Date().toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Tag, {\n        value: props.formatSize,\n        severity: \"warning\",\n        className: \"px-3 py-2\",\n        style: {\n          marginLeft: '2rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"button\",\n        icon: \"pi pi-times\",\n        className: \"p-button-outlined p-button-rounded p-button-danger ml-auto\",\n        onClick: () => onTemplateRemove(file, props.onRemove)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this);\n  };\n\n  const chooseOptions = {\n    icon: 'pi pi-fw pi-images',\n    iconOnly: false,\n    className: 'custom-choose-btn p-button-rounded p-button-outlined'\n  };\n  const uploadOptions = {\n    icon: 'pi pi-fw pi-cloud-upload',\n    iconOnly: false,\n    className: 'custom-upload-btn p-button-success p-button-rounded p-button-outlined'\n  };\n  const cancelOptions = {\n    icon: 'pi pi-fw pi-times',\n    iconOnly: false,\n    className: 'custom-cancel-btn p-button-danger p-button-rounded p-button-outlined'\n  };\n\n  const invoiceImageHandler = ({\n    files\n  }) => {\n    const [file] = files;\n    const fileReader = new FileReader();\n\n    fileReader.onload = e => {\n      if (e.target) uploadImage(e.target.result);\n    };\n\n    fileReader.readAsDataURL(file);\n  };\n\n  const uploadImage = async invoiceFile => {\n    let formData = new FormData();\n    formData.append('invoiceFile', invoiceFile);\n    console.log(\"uploaded image\");\n    console.log(invoiceFile);\n    setImage(invoiceFile);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const housePayload = {\n      description: description,\n      phone: phone,\n      latitude: latitude,\n      longitude: longitude,\n      capacity: capacity,\n      bookingPeriod: bookingPeriod,\n      image: image,\n      name: name,\n      address: address,\n      city: city\n    };\n    dispatch(saveHouse(housePayload));\n    console.log('Add house was called');\n  };\n\n  const onClickSave = e => {\n    e.preventDefault();\n    navigate('/account-owner');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"card-add\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: house,\n          width: \"50 rem\",\n          height: \"50 rem\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: '#6366f1'\n        },\n        children: \"Add house\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            float: 'left'\n          },\n          children: \"Your city\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(InputText, {\n            style: {\n              width: '32rem'\n            },\n            id: \"cityName\",\n            \"aria-describedby\": \"Description-help\",\n            onChange: e => setCity(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"block add-header\",\n            id: \"Description-help\",\n            children: \"Enter your city.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"add-header\",\n          children: \"Name of house\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(InputText, {\n            style: {\n              width: '32rem'\n            },\n            id: \"cityName\",\n            \"aria-describedby\": \"Description-help\",\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"block add-header\",\n            id: \"Description-help\",\n            children: \"This is required for management purposes.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"add-header\",\n          children: \"Your address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(InputText, {\n            style: {\n              width: '32rem'\n            },\n            id: \"address\",\n            \"aria-describedby\": \"Description-address\",\n            onChange: e => setAddress(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"block add-header\",\n            id: \"Description-address\",\n            children: \"Enter the full address as detailed as possible.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"add-header\",\n          children: \"Your phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(InputText, {\n            style: {\n              width: '32rem'\n            },\n            id: \"phone\",\n            \"aria-describedby\": \"phone-help\",\n            onChange: e => setPhone(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"block add-header\",\n            id: \"phone-help\",\n            children: \"Contact phone number.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rowC\",\n          style: {\n            width: '32rem',\n            textAlign: 'left'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"add-header\",\n            style: {\n              width: '15rem'\n            },\n            children: \"Capacity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"add-header\",\n            style: {\n              width: '15rem',\n              marginLeft: '1.5rem'\n            },\n            children: \"Number of days\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rowC\",\n          style: {\n            width: '32rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputNumber, {\n            inputId: \"minmax-buttons\",\n            value: capacity,\n            onValueChange: e => setCapacity(e.value),\n            mode: \"decimal\",\n            showButtons: true,\n            min: 0,\n            max: 100\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              marginLeft: '0.5rem'\n            },\n            inputId: \"minmax-buttons\",\n            value: bookingPeriod,\n            onValueChange: e => setBookingPeriod(e.value),\n            mode: \"decimal\",\n            showButtons: true,\n            min: 0,\n            max: 100\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rowC\",\n          style: {\n            width: '32rem',\n            textAlign: 'left'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              width: '16rem'\n            },\n            className: \"block add-header\",\n            id: \"phone-help\",\n            children: \"Number of people\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              width: '16rem',\n              marginLeft: '1.5rem'\n            },\n            className: \"block add-header\",\n            id: \"phone-help\",\n            children: \"Number of days\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"add-header\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InputTextarea, {\n          style: {\n            width: '32rem'\n          },\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          rows: 5,\n          cols: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"block add-header\",\n          id: \"help\",\n          children: \"House? Apartment? Rooms? What are the conditions? Add details about \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"block add-header\",\n          id: \"help\",\n          children: \"your place and who are you willing to accomondate.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"photo\",\n          children: /*#__PURE__*/_jsxDEV(FileUpload, {\n            name: \"invoice\",\n            accept: \"image/*\",\n            customUpload: true,\n            uploadHandler: invoiceImageHandler,\n            mode: \"advanced\",\n            auto: true,\n            onSelect: onTemplateSelect,\n            onError: onTemplateClear,\n            onClear: onTemplateClear,\n            maxFileSize: 3000000,\n            headerTemplate: headerTemplate,\n            itemTemplate: itemTemplate,\n            emptyTemplate: emptyTemplate,\n            chooseOptions: chooseOptions,\n            uploadOptions: uploadOptions,\n            cancelOptions: cancelOptions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              marginTop: '2rem'\n            },\n            icon: \"pi pi-home\",\n            label: \"Save\",\n            onClick: onClickSave\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n};\n\nexport default NewHouse;","map":null,"metadata":{},"sourceType":"module"}